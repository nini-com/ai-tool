<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Strategy Advisor</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0D1B2A;
            color: #E0E1DD;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 2rem;
        }
        .gemini-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }
        .gemini-modal.visible {
            opacity: 1;
            visibility: visible;
        }
        .gemini-modal-content {
            background-color: #1B263B;
            padding: 2rem;
            border-radius: 0.75rem;
            width: 90%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            transform: scale(0.95);
            transition: transform 0.3s ease;
        }
        .gemini-modal.visible .gemini-modal-content {
            transform: scale(1);
        }
        .loader {
            border: 4px solid #415A77;
            border-top: 4px solid #FFD166;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 2rem auto;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .gemini-button {
            background-image: linear-gradient(to right, #F76F72 0%, #FFD166  51%, #F76F72  100%);
            margin-top: 1rem;
            padding: 12px 25px;
            text-align: center;
            text-transform: uppercase;
            transition: 0.5s;
            background-size: 200% auto;
            color: white;            
            border-radius: 0.5rem;
            display: block;
            width: 100%;
            font-weight: bold;
            cursor: pointer;
        }
        .gemini-button:hover {
            background-position: right center;
            color: #fff;
            text-decoration: none;
        }
        .form-select {
            background-color: #0D1B2A;
            border: 1px solid #415A77;
        }
    </style>
</head>
<body>

    <div class="bg-[#1B263B] rounded-xl shadow-2xl p-6 md:p-8 w-full max-w-2xl">
        <h3 class="text-2xl font-bold text-white text-center mb-4">âœ¨ AI Strategy Advisor</h3>
        <p class="text-gray-400 text-center mb-6">Answer a few questions to get a personalized recommendation for your AI strategy.</p>
        <div id="strategyAdvisorForm" class="space-y-4">
            <div>
                <label for="aiGoal" class="block text-sm font-medium text-gray-300">What is your primary goal for using AI?</label>
                <select id="aiGoal" class="form-select mt-1 block w-full rounded-md shadow-sm py-2 px-3 text-white focus:outline-none focus:ring-[#FFD166] focus:border-[#FFD166]">
                    <option>Increase Efficiency</option>
                    <option>Innovate New Products</option>
                    <option>Improve Customer Experience</option>
                    <option>Data Analysis & Insights</option>
                </select>
            </div>
             <div>
                <label for="aiPrivacy" class="block text-sm font-medium text-gray-300">How important is data privacy and control?</label>
                <select id="aiPrivacy" class="form-select mt-1 block w-full rounded-md shadow-sm py-2 px-3 text-white focus:outline-none focus:ring-[#FFD166] focus:border-[#FFD166]">
                    <option>Critical - Data cannot leave our servers</option>
                    <option>Important, but cloud is acceptable with safeguards</option>
                    <option>Not a primary concern</option>
                </select>
            </div>
             <div>
                <label for="aiExpertise" class="block text-sm font-medium text-gray-300">What is your team's in-house technical expertise?</label>
                <select id="aiExpertise" class="form-select mt-1 block w-full rounded-md shadow-sm py-2 px-3 text-white focus:outline-none focus:ring-[#FFD166] focus:border-[#FFD166]">
                    <option>High - We have dedicated ML engineers</option>
                    <option>Medium - We have developers who can use APIs</option>
                    <option>Low - We prefer no-code solutions</option>
                </select>
            </div>
            <button id="getRecommendation" class="gemini-button">Get Recommendation</button>
        </div>
    </div>

    <div id="geminiModal" class="gemini-modal">
        <div class="gemini-modal-content">
            <button id="closeModal" class="absolute top-4 right-4 text-gray-400 hover:text-white text-2xl">&times;</button>
            <h3 id="modalTitle" class="text-2xl font-bold text-white mb-4"></h3>
            <div id="modalBody">
                <div class="loader"></div>
            </div>
        </div>
    </div>

    <script>
        const geminiModal = document.getElementById('geminiModal');
        const modalTitle = document.getElementById('modalTitle');
        const modalBody = document.getElementById('modalBody');
        const closeModalBtn = document.getElementById('closeModal');

        const showModal = (title) => {
            modalTitle.textContent = title;
            modalBody.innerHTML = '<div class="loader"></div>';
            geminiModal.classList.add('visible');
        };

        const hideModal = () => {
            geminiModal.classList.remove('visible');
        };

        closeModalBtn.addEventListener('click', hideModal);
        geminiModal.addEventListener('click', (e) => {
            if (e.target === geminiModal) {
                hideModal();
            }
        });

        async function callGeminiApi(prompt, maxRetries = 3) {
            const apiKey = "AIzaSyB9IXpAfkea5AKE7zg3UJ-9CV3iH55L5WY"; 
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;
            const payload = {
                contents: [{ role: "user", parts: [{ text: prompt }] }]
            };

            let attempt = 0;
            while (attempt < maxRetries) {
                try {
                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }

                    const result = await response.json();
                    
                    if (result.candidates && result.candidates.length > 0 && result.candidates[0].content.parts.length > 0) {
                        return result.candidates[0].content.parts[0].text;
                    } else {
                        throw new Error("Invalid response structure from Gemini API.");
                    }
                } catch (error) {
                    attempt++;
                    if (attempt >= maxRetries) {
                        console.error("Gemini API call failed after multiple retries:", error);
                        modalBody.innerHTML = `<p class="text-red-400">Sorry, something went wrong while contacting the AI. Please try again later.</p>`;
                        return null;
                    }
                    const delay = Math.pow(2, attempt) * 1000;
                    await new Promise(res => setTimeout(res, delay));
                }
            }
        }
        
        document.getElementById('getRecommendation').addEventListener('click', async () => {
            const goal = document.getElementById('aiGoal').value;
            const privacy = document.getElementById('aiPrivacy').value;
            const expertise = document.getElementById('aiExpertise').value;

            showModal('AI Strategy Recommendation');
            const prompt = `You are an expert AI strategy consultant. A user has provided the following information about their project:
- Primary Goal: "${goal}"
- Importance of Data Privacy: "${privacy}"
- In-house Technical Expertise: "${expertise}"

Based on this profile, recommend whether they should lean towards a **Proprietary Platform** (like OpenAI, Google Gemini API) or an **Open-Source Solution** (like Llama, Mistral).

Provide a clear recommendation first (e.g., "Recommendation: Proprietary Platform").
Then, provide a concise, bulleted list of 3-4 key reasons justifying your recommendation based *specifically* on the user's answers.
The tone should be advisory and clear. Format the output with a bold heading for the recommendation and then the bulleted list using asterisks.`;
            const result = await callGeminiApi(prompt);
            if (result) {
                modalBody.innerHTML = result.replace(/\n/g, '<br>').replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>').replace(/\* /g, '<br>&bull; ');
            }
        });
    </script>
</body>
</html>
